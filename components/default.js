// Generated by CoffeeScript 1.9.1
var attending, component, dom, hub, inject, ql, ref, widget;

ref = require('odojs'), component = ref.component, dom = ref.dom, widget = ref.widget;

inject = require('injectinto');

ql = require('odoql/ql');

hub = require('odo-hub');

attending = component({
  render: function(names, params) {
    var fn, i, index, items, len, name, nameinput;
    nameinput = function(name, cb) {
      return dom('div', [
        dom('input', {
          onkeyup: function(e) {
            if (e.keyCode === 13) {
              return cb(e.target.value);
            }
          },
          onblur: function(e) {
            return cb(e.target.value);
          },
          attributes: {
            type: 'text',
            autocomplete: 'off',
            autocorrect: 'off',
            autocapitalize: 'off',
            value: name
          }
        })
      ]);
    };
    items = [];
    fn = function(index) {
      return items.push(nameinput(name, function(newname) {
        return console.log("EDITED " + index);
      }));
    };
    for (index = i = 0, len = names.length; i < len; index = ++i) {
      name = names[index];
      fn(index);
    }
    items.push(nameinput('', function(name) {
      if (name !== '') {
        return console.log('NEW ITEM');
      }
    }));
    return dom('div', [
      dom('div', [
        dom('label', [
          dom('input', {
            attributes: {
              type: 'checkbox'
            }
          }), dom('span'), dom('span', "RSVP to the " + params.title)
        ])
      ]), dom('h4', 'Who is attending?'), dom('div', items)
    ]);
  }
});

inject.bind('page:default', component({
  render: function(state, params) {
    var titileattr;
    titileattr = {
      attributes: {
        "class": 'title',
        src: '/title.png'
      }
    };
    return dom('div', {
      attributes: {
        "class": 'wrapper'
      }
    }, [
      dom('h1', 'Joe Bloggs'), dom('img', titileattr), attending(['Joe Bloggs'], {
        title: 'Pre Wedding Celebrations'
      }), attending(['Joe Bloggs'], {
        title: 'Wedding Ceremony'
      }), attending(['Joe Bloggs'], {
        title: 'Wedding Reception'
      })
    ]);
  }
}));
